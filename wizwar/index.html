<!DOCTYPE html>
<HTML>
<HEAD>

<link rel="stylesheet" type="text/css" href="styles.css" />

<!-- script src here does not appear to be read on Android mobile browser -->

<TITLE>
  Wizards' War
</TITLE>

</HEAD>
<BODY style="margin: 0 0 0 0;">

  <SCRIPT>
    pressFold = new function () {};
    pressBet = new function () {};
  </SCRIPT>

  <div id="outermost" style="position: relative">

    <div id="scene-box" class="desert-background" style="position: relative; margin: 0 auto; width: 393px; height: 262px;">

      <canvas id='world' width="393" height="262" style="position: absolute;"></canvas>

      <div id="revealed-elements" style="position: relative; width: 140px; margin-left: auto; margin-right: auto; height: 24px;">
        <div id="rev-element-1" style="display: inline-block;" class="card-el"></div>
        <div id="rev-element-2" style="display: inline-block;" class="card-el"></div>
        <div id="rev-element-3" style="display: inline-block;" class="card-el"></div>
        <div id="rev-element-4" style="display: inline-block;" class="card-el"></div>
        <div id="rev-element-5" style="display: inline-block;" class="card-el"></div>
      </div>

      <div id="message-box" style="position: relative; width: 85%; margin: 0 auto; border: 1px solid black;">
        &nbsp;<!-- message-box -->
      </div>

      <div id="allyTeamBox" class="team-box" style="position: absolute; width: 60px; height: 200px; left: 0px; top: 110px; padding: 0; margin: 0;">
          <div id="char-box">
            <div id="sprite1" class="sprite wizard top-row" frame="1"></div>
          </div>
          <div id="sprite2" class="sprite wizard mid-top-row" frame="1"></div>
          <div id="sprite3" class="sprite wizard mid-bot-row" frame="1"></div>
          <div id="sprite4" class="sprite wizard bot-row" frame="1"></div>

 <!--          <div id="spellcore1" class="spellcore spin-1s"></div>
          <div id="spellcore2" class="spellcore spin-1s"></div>
          <div id="spellcore3" class="spellcore spin-1s"></div>
          <div id="spellcore4" class="spellcore spin-1s"></div> -->

          <div id="spellshot1" class="spellshot"></div>
          <div id="spellshot2" class="spellshot"></div>
          <div id="spellshot3" class="spellshot"></div>
          <div id="spellshot4" class="spellshot"></div>
      </div>

      <!-- <div id="glyph" class="spin-1s">
        <svg>
          <circle cx="50" cy="50" r="48" stroke="black" stroke-width="1" fill="none"/>
          <polyline points="50,0 90,75 15,85 50,0" stroke="black" stroke-width="1" fill="none"></polyline>
        </svg>
      </div> -->

      <div id="foeTeamBox"; style="position: absolute; width: 50px; height: 200px; right: 0; top: 110px; padding: 0; margin: 0;">
          <div id="sprite5" class="sprite wizard right-sprite top-row frame-1"></div>
          <!-- <div id="spell5" style="display: inline-block; height: 10px; width: 10px; background-color: orange;"> -->

          <div id="sprite6" class="sprite wizard right-sprite mid-top-row frame-1"></div>

          <div id="sprite7" class="sprite wizard right-sprite mid-bot-row frame-1"></div>

          <div id="sprite8" class="sprite wizard right-sprite bot-row frame-1"></div>

          <div id="spellshot5" class="spellshot"></div>
          <div id="spellshot6" class="spellshot"></div>
          <div id="spellshot7" class="spellshot"></div>
          <div id="spellshot8" class="spellshot"></div>
      </div>

      <div id="player-elements">

        <!-- <div id="pers-element-1"></div>
        <div id="pers-element-2"></div> -->

        <div id="player-element-1" class="card-el els-of-1"></div>
        <div id="player-element-2" class="card-el els-of-1 right-el"></div>

        <div id="player-element-3" class="card-el els-of-2"></div>
        <div id="player-element-4" class="card-el els-of-2 right-el"></div>

        <div id="player-element-5" class="card-el els-of-3"></div>
        <div id="player-element-6" class="card-el els-of-3 right-el"></div>

        <div id="player-element-7" class="card-el els-of-4"></div>
        <div id="player-element-8" class="card-el els-of-4 right-el"></div>

        <div id="player-element-9" class="card-el els-of-5"></div>
        <div id="player-element-10" class="card-el els-of-5 right-el"></div>

        <div id="player-element-11" class="card-el els-of-6"></div>
        <div id="player-element-12" class="card-el els-of-6 right-el"></div>

        <div id="player-element-13" class="card-el els-of-7"></div>
        <div id="player-element-14" class="card-el els-of-7 right-el"></div>

        <div id="player-element-15" class="card-el els-of-8"></div>
        <div id="player-element-16" class="card-el els-of-8 right-el"></div>

      </div>

    </div>

    <div id="control-area" style="position: relative; margin: 0 auto; width: 393px;">
      <!-- <div id="teamVitalsBox">
        team-vitals
      </div> -->

      <div id="progress-bar-back">
        <div id="progress-bar-fill">
        </div>
      </div>

      <div id="actionButtons">
        <div id="foldButton" class="action-button fold-button" onclick="pressFold()">
          <div class="center-text">
            DEFEND
          </div>
        </div>
        <!-- <div id="callButton" style="display: inline-block; border-radius: 50%; height: 64px; width: 64px; background-color: yellow;" onclick="meet()"></div> -->
        <div id="raiseButton" class="action-button raise-button" onclick="pressBet()">
          <div class="center-text">
            RAISE
          </div>
        </div>
      <div id="spellToggles">
        <!-- toggles -->
      </div>

      <div id="healthReadout">
      </div>

    </div>
  </div>

  <!-- Magnetic should never need to call anything from Game -->
  <script src="mags.js" type="text/javascript"></script>

  <script src="game.js" type="text/javascript"></script>

  <SCRIPT>

    (function() {
      function whichTransitionEvent(){
        var t;
        var el = document.createElement('fakeelement');
        var transitions = {
          'transition':'transitionend',
          'OTransition':'oTransitionEnd',
          'MozTransition':'transitionend',
          'WebkitTransition':'webkitTransitionEnd'
        }

        for(t in transitions){
          if( el.style[t] !== undefined ){
            return transitions[t];
          }
        }
      }

      var transitionEvent = whichTransitionEvent();

      var els = document.getElementsByClassName('spellshot');

      for (var i = 0; i < els.length; i++) {
        var el = els[i];
        transitionEvent && el.addEventListener(transitionEvent, function(event) {
          event.target.classList.remove('inflight');
        });
      }

    })();

    pressFold = Game.pressFold;
    pressBet = Game.pressBet;
    Game.begin();

  </SCRIPT>
</BODY>
